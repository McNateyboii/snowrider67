<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Snow Rider 3D</title>

    <script src="UnityProgress.js"></script>
    <script src="UnityLoader.js"></script>

    <style>
        html, body { width:100%; height:100%; margin:0; }
        .webgl-content, #gameContainer { width:100%; height:100%; }
        canvas { width:100% !important; height:100% !important; display:block; }
    </style>

<script>
    const ENABLE_PASSWORD = 1;
    const PASSWORD = "nathan is the best";

    function startGame() {
        const login = document.getElementById("login");
        const webgl = document.querySelector(".webgl-content");

        if (login) login.style.display = "none";
        if (webgl) webgl.style.display = "block";

        UnityLoader.instantiate("gameContainer", "config.json", {
            onProgress: UnityProgress
        });
    }

    function checkPassword() {
        const pw = document.getElementById("pw").value;

        if (ENABLE_PASSWORD === 0 || pw === PASSWORD) {
            localStorage.setItem("isLoggedIn", "true");
            startGame();
        } else {
            alert("Wrong password");
        }
    }

    window.onload = function () {
        if (ENABLE_PASSWORD === 0) {
            startGame();
            return;
        }

        if (localStorage.getItem("isLoggedIn") === "true") {
            startGame();
        }
    };
</script>
</head>

<body>
    <div id="login">
        Password:
        <input type="password" id="pw">
        <button onclick="checkPassword()">Enter</button>
    </div>

    <div class="webgl-content" style="display:none;">
        <div id="gameContainer"></div>
    </div>
</body>
</html>

